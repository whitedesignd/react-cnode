{"version":3,"sources":["Components/breadcrumb/Breadcrumb.jsx","View/message/Message.jsx"],"names":["Breadcrumb","props","className","children","connect","state","token","message","has_read_messages","hasnot_read_messages","Msg","arr","map","v","i","key","type","to","author","loginname","topic","id","title","this","getData","axios","get","params","accesstoken","then","res","data","setState","length","call","style","marginTop","color","React","Component"],"mappings":"gGAAA,6DAEe,SAASA,EAAWC,GAC/B,OACQ,yBAAKC,UAAU,cAEPD,EAAME,Y,uNCKXC,uBALE,SAACC,GAChB,MAAO,CACLC,MAAOD,EAAMC,SAGFF,CAAA,4MACbC,MAAQ,CACNE,QAAS,CACPC,kBAAmB,GACnBC,qBAAsB,KAJb,EAoBbC,IAAM,SAACC,GACL,OACE,4BACGA,EAAIC,KAAI,SAACC,EAAGC,GACX,OACE,wBAAIC,IAAKD,GAEM,UAAXD,EAAEG,MAAoB,6BACpB,kBAAC,IAAD,CAASC,GAAE,gBAAWJ,EAAEK,OAAOC,YAAcN,EAAEK,OAAOC,WACtD,8EACA,kBAAC,IAAD,CAASF,GAAE,iBAAYJ,EAAEO,MAAMC,KAAOR,EAAEO,MAAME,QAIrC,OAAXT,EAAEG,MAAiB,6BACjB,kBAAC,IAAD,CAASC,GAAE,gBAAWJ,EAAEK,OAAOC,YAAcN,EAAEK,OAAOC,WACtD,sDACA,kBAAC,IAAD,CAASF,GAAE,iBAAYJ,EAAEO,MAAMC,KAAOR,EAAEO,MAAME,OAC9C,6DAtCH,kEASXC,KAAKC,YATM,kKAaeC,IAAMC,IAAN,eAA0B,CAAEC,OAAQ,CAAEC,YAAaL,KAAKtB,MAAMK,SAAWuB,MAAK,SAAAC,GAAG,OAAIA,EAAIC,QAbxG,gBAaCD,EAbD,EAaLC,KACNR,KAAKS,UAAS,SAAC3B,GAEb,OADAA,EAAME,QAAN,eAAoBuB,GACbzB,KAhBE,qIAgDH,IAAD,QACP,OACE,yBAAKH,UAAU,WACb,yBAAKA,UAAU,SACb,kBAAC,IAAD,KACE,kBAAC,IAAD,CAASe,GAAG,UAAZ,gBADF,IAGE,qDAEF,yBAAKf,UAAU,YAEsC,KAAjD,UAAAqB,KAAKlB,MAAME,eAAX,eAAoBC,kBAAkByB,QAAe,yDAAkBV,KAAKb,IAAIwB,KAAKX,KAAd,UAAoBA,KAAKlB,MAAME,eAA/B,aAAoB,EAAoBE,wBAIrH,yBAAKP,UAAU,QAAQiC,MAAO,CAAEC,UAAW,SACzC,kBAAC,IAAD,KACE,yBAAKD,MAAO,CAAEE,MAAO,SAArB,8BAEF,yBAAKnC,UAAU,YAEyC,KAApD,UAAAqB,KAAKlB,MAAME,eAAX,eAAoBE,qBAAqBwB,QAAe,yDAAkBV,KAAKb,IAAIwB,KAAKX,KAAd,UAAoBA,KAAKlB,MAAME,eAA/B,aAAoB,EAAoBC,0BArEjH,GAAwC8B,IAAMC","file":"static/js/7.0723d3d3.chunk.js","sourcesContent":["import React from 'react';\r\nimport './breadcrumb.scss'\r\nexport default function Breadcrumb(props) {\r\n    return (\r\n            <div className=\"breadcrumb\">\r\n                {\r\n                    props.children\r\n                }\r\n            </div>\r\n    )\r\n};\r\n","import React from 'react';\r\nimport { NavLink } from 'react-router-dom'\r\nimport Breadcrumb from '../../Components/breadcrumb/Breadcrumb';\r\nimport axios from 'axios'\r\nimport { connect } from 'react-redux';\r\nimport './message.scss'\r\nconst mapState = (state) => {\r\n  return {\r\n    token: state.token\r\n  }\r\n}\r\nexport default connect(mapState)(class Meaasge extends React.Component {\r\n  state = {\r\n    message: {\r\n      has_read_messages: [],\r\n      hasnot_read_messages: []\r\n    }\r\n  }\r\n\r\n  componentDidMount(){\r\n    this.getData();\r\n  }\r\n\r\n  async getData() {\r\n    let { data: res } = await axios.get(`/v1/messages`, { params: { accesstoken: this.props.token } }).then(res => res.data);\r\n    this.setState((state) =>{\r\n      state.message = {...res};\r\n      return state;\r\n    })\r\n  }\r\n\r\n  Msg = (arr) => {\r\n    return (\r\n      <ul>\r\n        {arr.map((v, i) => {\r\n          return (\r\n            <li key={i}>\r\n              {\r\n                v.type === 'reply' && <div>\r\n                  <NavLink to={`/user/${v.author.loginname}`}>{v.author.loginname}</NavLink>\r\n                  <span> 回复了你的话题 </span>\r\n                  <NavLink to={`/topic/${v.topic.id}`}>{v.topic.title}</NavLink>\r\n                </div>\r\n              }\r\n              {\r\n                v.type === 'at' && <div>\r\n                  <NavLink to={`/user/${v.author.loginname}`}>{v.author.loginname}</NavLink>\r\n                  <span> 在话题 </span>\r\n                  <NavLink to={`/topic/${v.topic.id}`}>{v.topic.title}</NavLink>\r\n                  <span> 中@了你</span>\r\n                </div>\r\n              }\r\n            </li>\r\n          )\r\n        })\r\n        }\r\n      </ul>\r\n    )\r\n  }\r\n  render() {\r\n    return (\r\n      <div className=\"message\">\r\n        <div className=\"panel\">\r\n          <Breadcrumb>\r\n            <NavLink to='/index'>首页</NavLink>\r\n                /\r\n            <span >新消息</span>\r\n          </Breadcrumb>\r\n          <div className=\"msg-list\">\r\n            {\r\n              this.state.message?.has_read_messages.length === 0 ? <div>暂无消息</div> : this.Msg.call(this, this.state.message?.hasnot_read_messages)\r\n            }\r\n          </div>\r\n        </div>\r\n        <div className=\"panel\" style={{ marginTop: '15px' }}>\r\n          <Breadcrumb>\r\n            <div style={{ color: '#000' }}> 已读消息</div>\r\n          </Breadcrumb>\r\n          <div className=\"msg-list\">\r\n            {\r\n              this.state.message?.hasnot_read_messages.length === 0 ? <div>暂无消息</div> : this.Msg.call(this, this.state.message?.has_read_messages)\r\n            }\r\n          </div>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n});\r\n"],"sourceRoot":""}